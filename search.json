[{"path":"https://uchidamizuki.github.io/jpstat/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Mizuki Uchida. Author, maintainer.","code":""},{"path":"https://uchidamizuki.github.io/jpstat/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Uchida M (2022). jpstat: Tools Easy Use 'e-Stat' API. https://github.com/UchidaMizuki/jpstat, https://uchidamizuki.github.io/jpstat/.","code":"@Manual{,   title = {jpstat: Tools for Easy Use of 'e-Stat' API},   author = {Mizuki Uchida},   year = {2022},   note = {https://github.com/UchidaMizuki/jpstat, https://uchidamizuki.github.io/jpstat/}, }"},{"path":"https://uchidamizuki.github.io/jpstat/index.html","id":"jpstat","dir":"","previous_headings":"","what":"Tools for Easy Use of e-Stat API","title":"Tools for Easy Use of e-Stat API","text":"README currently available Japanese. jpstatは日本政府統計のポータルサイトであるe-StatのAPIを利用するためのツールを提供します． クエリの自動生成，データの収集，フォーマットなどの機能を備えています． e-Stat APIの利用にはアカウント登録 (appIdと呼ばれるAPIキーの発行) が必要です (詳しくはホームページを参照してください)． また，データ利用に際しては利用規約に従う必要があります． 「このサービスは、政府統計総合窓口(e-Stat)のAPI機能を使用していますが、サービスの内容は国によって保証されたものではありません。」","code":""},{"path":"https://uchidamizuki.github.io/jpstat/index.html","id":"インストール方法","dir":"","previous_headings":"","what":"インストール方法","title":"Tools for Easy Use of e-Stat API","text":"jpstatの開発版は，GitHubから以下の方法でインストールできます．","code":"install.packages(\"jpstat\") # install.packages(\"devtools\") devtools::install_github(\"UchidaMizuki/jpstat\")"},{"path":"https://uchidamizuki.github.io/jpstat/index.html","id":"使用方法","dir":"","previous_headings":"","what":"使用方法","title":"Tools for Easy Use of e-Stat API","text":"","code":"library(jpstat) library(dplyr)"},{"path":"https://uchidamizuki.github.io/jpstat/index.html","id":"データ取得整形の概要","dir":"","previous_headings":"使用方法","what":"データ取得・整形の概要","title":"Tools for Easy Use of e-Stat API","text":"データ取得・整形の一連の流れは以下のようになります． ここでは，国勢調査データを対象として， 2010・2015年の東京都・大阪府における男女別人口を取得します． 詳細な使用方法は次の項目で説明します．","code":"# メタ情報の取得 census <- estat(appId = \"Your e-Stat appId\",                  statsDataId = \"https://www.e-stat.go.jp/dbview?sid=0003410379\") # 2010・2015年の東京都・大阪府における男女別人口を取得 census <- census %>%       activate(tab) %>%    filter(name == \"人口\") %>%    select() %>%       activate(cat01) %>%    rekey(\"sex\") %>%    filter(name %in% c(\"男\", \"女\")) %>%    select(name) %>%       activate(area) %>%    rekey(\"pref\") %>%    filter(name %in% c(\"東京都\", \"大阪府\")) %>%    select(code, name) %>%       activate(time) %>%    rekey(\"year\") %>%    filter(name %in% c(\"2010年\", \"2015年\")) %>%    select(name) %>%       collect(n = \"pop\") #> The total number of data is 8.  knitr::kable(census)"},{"path":"https://uchidamizuki.github.io/jpstat/index.html","id":"データ取得整形の流れ","dir":"","previous_headings":"使用方法","what":"データ取得・整形の流れ","title":"Tools for Easy Use of e-Stat API","text":"jpstatでは，e-Stat APIのメタ情報取得 (getMetaInfo) と統計データ取得 (getStatsData) を用いて，統計表をダウンロードが可能です． e-Statでは，統計表ごとに統計表ID (statsDataId) が付与されています．統計表IDは， データセット情報ページ (例1) や 統計表・グラフ表示ページ (例2) のURLからも取得することが可能です． ここでは，例2に挙げた国勢調査データを対象として， 2010・2015年の東京都・大阪府における男女別人口を取得します． まず，estat()関数に，appIdとデータセット情報ページなどのURLまたは統計表ID (statsDataId) を入力してメタ情報 (統計データの属性情報) を取得します． estat_table_info()関数で統計表情報を表示します． 当該データには，tab，cat01，area, timeの4種類の列 (以下，キーと呼びます) が存在します． それぞれのキーには以下の情報が記載されています． デフォルトでの列名 (tabなど) アイテム数 ([2]など) コード・名称などの属性 (<code, name, level, unit>など) ここからは，それぞれのキーごとに列名・アイテム数・属性を変更する方法を説明します． それぞれのキーの情報を変更するためには，activate()関数を用いてキーを選択します． 例えば，以下のようにtabキーをアクティブにします． キーをアクティブにすると当該キーのアイテム情報が表示されます． さらに，filter()関数やselect()関数を用いてアイテム情報の絞り込みなどが可能です． ここでは，「人口」のみを選択します． 次に，cat01の「男，女及び総数2015」を選択します．rekey()関数によってキーの名称cat01を変更することが可能です（ここではsex）． キーの名称を変更することでデータダウンロード時の列名を指定ことができます． また，上と同様に属性の絞り込みを行います． ここでは，name列を選択します． 上と同様に，area（「地域2015」）とtime（「時間軸（調査年）」）の名称変更・属性絞り込みを行います． 以上の操作により，以下のように列名・アイテム数・属性が変更できました． 最後に，collect()関数を用いてデータをダウンロードします． collect()関数のnで値の名称を指定します．","code":"# 国勢調査 データセット情報ページ URL census <- estat(appId = \"Your e-Stat appId\",                  statsDataId = \"https://www.e-stat.go.jp/dbview?sid=0003413949\") census  #> # [ ] tab:   表章項目           [2] <code, name, level, unit> #> # [ ] cat01: 男，女及び総数2015 [3] <code, name, level> #> # [ ] area:  地域2015           [48] <code, name, level, parentCode> #> # [ ] time:  時間軸（調査年）   [21] <code, name, level> #> #  #> # Please `activate()` an item. knitr::kable(estat_table_info(census)) census %>%    activate(tab) #> # [x] tab:   表章項目           [2] <code, name, level, unit> #> # [ ] cat01: 男，女及び総数2015 [3] <code, name, level> #> # [ ] area:  地域2015           [48] <code, name, level, parentCode> #> # [ ] time:  時間軸（調査年）   [21] <code, name, level> #> #  #> # A data frame: 2 x 4 #>   code  name     level unit            #> * <chr> <chr>    <chr> <chr>           #> 1 020   人口     \"\"    人              #> 2 1120  人口性比 \"\"    女100人につき男  # Or census %>%    activate(1) #> # [x] tab:   表章項目           [2] <code, name, level, unit> #> # [ ] cat01: 男，女及び総数2015 [3] <code, name, level> #> # [ ] area:  地域2015           [48] <code, name, level, parentCode> #> # [ ] time:  時間軸（調査年）   [21] <code, name, level> #> #  #> # A data frame: 2 x 4 #>   code  name     level unit            #> * <chr> <chr>    <chr> <chr>           #> 1 020   人口     \"\"    人              #> 2 1120  人口性比 \"\"    女100人につき男 census <- census %>%    activate(tab) %>%    filter(name == \"人口\") %>%    # アイテム数が1つのみであるため列を全て削除   select() census <- census %>%    activate(cat01) %>%   rekey(\"sex\") %>%    filter(name %in% c(\"男\", \"女\")) %>%    select(name) census <- census %>%    activate(area) %>%    rekey(\"pref\") %>%    filter(name %in% c(\"東京都\", \"大阪府\")) %>%    select(code, name) %>%       activate(time) %>%    rekey(\"year\") %>%    filter(name %in% c(\"2010年\", \"2015年\")) %>%    select(name) census #> # [ ] tab:  表章項目           [1] <> #> # [ ] sex:  男，女及び総数2015 [2] <name> #> # [ ] pref: 地域2015           [2] <code, name> #> # [x] year: 時間軸（調査年）   [2] <name> #> #  #> # A data frame: 2 x 1 #>   name   #> * <chr>  #> 1 2010年 #> 2 2015年 census <- census %>%   collect(n = \"pop\") #> The total number of data is 8. knitr::kable(census)"},{"path":"https://uchidamizuki.github.io/jpstat/reference/estat.html","id":null,"dir":"Reference","previous_headings":"","what":"Get meta-information of 'e-Stat' data — estat","title":"Get meta-information of 'e-Stat' data — estat","text":"estat gets meta-information statistical table using getMetaInfo 'e-Stat' API, returns estat object allows editing meta-information filter select.","code":""},{"path":"https://uchidamizuki.github.io/jpstat/reference/estat.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get meta-information of 'e-Stat' data — estat","text":"","code":"estat(   appId,   statsDataId,   lang = c(\"J\", \"E\"),   query = list(),   path = \"rest/3.0/app/json/\" )"},{"path":"https://uchidamizuki.github.io/jpstat/reference/estat.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get meta-information of 'e-Stat' data — estat","text":"appId 'appId' 'e-Stat' API. statsDataId statistical data ID 'e-Stat'. lang language, Japanese (\"J\") English (\"E\"). query list additional queries. path e-Stat API path.","code":""},{"path":"https://uchidamizuki.github.io/jpstat/reference/estat.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get meta-information of 'e-Stat' data — estat","text":"estat object.","code":""},{"path":[]},{"path":"https://uchidamizuki.github.io/jpstat/reference/estat.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get meta-information of 'e-Stat' data — estat","text":"","code":"if (FALSE) { estat(\"https://www.e-stat.go.jp/dbview?sid=0003433219\") }"},{"path":"https://uchidamizuki.github.io/jpstat/reference/estat_table_info.html","id":null,"dir":"Reference","previous_headings":"","what":"Get table information for 'e-Stat' data — estat_table_info","title":"Get table information for 'e-Stat' data — estat_table_info","text":"Get table information 'e-Stat' data","code":""},{"path":"https://uchidamizuki.github.io/jpstat/reference/estat_table_info.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get table information for 'e-Stat' data — estat_table_info","text":"","code":"estat_table_info(x)"},{"path":"https://uchidamizuki.github.io/jpstat/reference/estat_table_info.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get table information for 'e-Stat' data — estat_table_info","text":"x estat object.","code":""},{"path":"https://uchidamizuki.github.io/jpstat/reference/estat_table_info.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get table information for 'e-Stat' data — estat_table_info","text":"tbl table information.","code":""},{"path":"https://uchidamizuki.github.io/jpstat/reference/iretp_trade.html","id":null,"dir":"Reference","previous_headings":"","what":"Information on real estate transaction prices API — iretp_trade","title":"Information on real estate transaction prices API — iretp_trade","text":"Information real estate transaction prices API","code":""},{"path":"https://uchidamizuki.github.io/jpstat/reference/iretp_trade.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Information on real estate transaction prices API — iretp_trade","text":"","code":"iretp_trade(   from,   to,   pref_code,   city_code,   lang = c(\"ja\", \"en\"),   .rename = TRUE )  iretp_city(pref_code, lang = c(\"ja\", \"en\"), .rename = TRUE)"},{"path":"https://uchidamizuki.github.io/jpstat/reference/iretp_trade.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Information on real estate transaction prices API — iretp_trade","text":"start time. end time. pref_code prefecture code. city_code city code. lang Language. .rename Change names?","code":""},{"path":[]},{"path":"https://uchidamizuki.github.io/jpstat/reference/jpstat.html","id":null,"dir":"Reference","previous_headings":"","what":"Tools for easy use of 'e-Stat' API — jpstat","title":"Tools for easy use of 'e-Stat' API — jpstat","text":"Provides tools using API 'e-Stat' (<https://www.e-stat.go.jp/>), portal site Japanese government statistics. Includes functions automatic query generation, data collection formatting.","code":""},{"path":[]},{"path":"https://uchidamizuki.github.io/jpstat/reference/jpstat.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Tools for easy use of 'e-Stat' API — jpstat","text":"Maintainer: Mizuki Uchida uchidamizuki@vivaldi.net","code":""},{"path":"https://uchidamizuki.github.io/jpstat/reference/reexports.html","id":null,"dir":"Reference","previous_headings":"","what":"Objects exported from other packages — reexports","title":"Objects exported from other packages — reexports","text":"objects imported packages. Follow links see documentation. dplyr collect, select navigatr activate, deactivate, rekey","code":""},{"path":"https://uchidamizuki.github.io/jpstat/news/index.html","id":"version-020","dir":"Changelog","previous_headings":"","what":"version 0.2.0","title":"version 0.2.0","text":"Change package name japanstat jpstat. Add dependency navigatr package support activate() rekey() functions.","code":""},{"path":"https://uchidamizuki.github.io/jpstat/news/index.html","id":"version-011","dir":"Changelog","previous_headings":"","what":"version 0.1.1","title":"version 0.1.1","text":"Fix Imports","code":""},{"path":[]}]
